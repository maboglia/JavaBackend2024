<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="ISO-8859-1">
    <title>Insert title here</title>

    <link rel="stylesheet" th:href="@{/webjars/bootstrap/5.3.3/css/bootstrap.min.css}">
    <script th:src="@{/webjars/bootstrap/5.3.3/js/bootstrap.min.js}"></script>
    <style>
        #quiz img {
            width: 100px;
            height: 70px;
            border: 1px solid #ccc;
        }
    </style>
</head>

<body>

    <div class="container">
        
        <div id="quiz" class="row">
            <div class="col-3">
            	<img class="img" id="box1" src="" alt="">
			</div>
            <div class="col-3">
	            <h1 class="domanda"></h1>
			</div>
            <div class="col-3">
	            <button class="btn btn-primary" id="play">Play</button>
			</div>
        </div>
    </div>


    <script>

        const URL = '/api/paese'
        
        document.getElementById('play').onclick = function () {
            location.reload();
        }
        fetch(URL)
            .then(res => res.json())
            .then(paesi => {

                let quiz = {
                    'domanda': '',
                    'risposte': [],
                    'risposta': ''
                }
                //document.getElementById('play').style = 'display:none'

                for (const paese of paesi) {
                	console.log(paese)
                    quiz.domanda = paese.nome
                    quiz.risposte.push(paese.alpha2Code)
                }
                quiz.risposta = quiz.risposte[0]
                quiz.risposte.sort()
                document.querySelector('.domanda').textContent = quiz.domanda
                document.querySelector('#box1').src = '/img/' + quiz.risposte[0] + '.png'
                document.querySelector('#box1').alt = quiz.risposte[0]

                document.querySelector('#box1').addEventListener('click',
                    function () {
                        if (this.alt == quiz.risposta)
                            vittoria(this.alt)
                    }
                )

            })
    </script>


</body>

</html>